generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("postgresql://postgres:81haFr6aMq7ebe5Z@db.gbohebmyjyjskmiaoprk.supabase.co:5432/postgres")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Gameweek {
  id        String    @id
  season_id String    @default(dbgenerated("now()"))
  gameweek  Int?      @db.SmallInt
  Season    Season    @relation(fields: [season_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  Matchup   Matchup[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Manager {
  name                               String    @id
  Matchup_Matchup_manager_1ToManager Matchup[] @relation("Matchup_manager_1ToManager")
  Matchup_Matchup_manager_2ToManager Matchup[] @relation("Matchup_manager_2ToManager")
  Matchup_Matchup_winnerToManager    Matchup[] @relation("Matchup_winnerToManager")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Matchup {
  id                                 String   @id
  gameweek_id                        String
  manager_1                          String?
  manager_2                          String?
  manager_1_score                    Int?     @db.SmallInt
  manager_2_score                    Int?     @db.SmallInt
  winner                             String?
  Gameweek                           Gameweek @relation(fields: [gameweek_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  Manager_Matchup_manager_1ToManager Manager? @relation("Matchup_manager_1ToManager", fields: [manager_1], references: [name], onDelete: NoAction, onUpdate: NoAction)
  Manager_Matchup_manager_2ToManager Manager? @relation("Matchup_manager_2ToManager", fields: [manager_2], references: [name], onDelete: NoAction, onUpdate: NoAction)
  Manager_Matchup_winnerToManager    Manager? @relation("Matchup_winnerToManager", fields: [winner], references: [name], onDelete: NoAction, onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Season {
  id       String     @id
  year     Int        @db.SmallInt
  Gameweek Gameweek[]
}
